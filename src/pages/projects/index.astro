---
import { getCollection } from "astro:content";
import Section from "@/components/Section.astro";
import Layout from "@/layouts/Layout.astro";
import ProjectCard from "@/components/ProjectCard.astro"; // new (recommended)

// Fetch projects instead of blog posts
const projects = await getCollection("projects");

// Optional: sort by year (descending), then title
projects.sort((a, b) => {
  const yearDiff = (b.data.year ?? 0) - (a.data.year ?? 0);
  return yearDiff !== 0
    ? yearDiff
    : a.data.title.localeCompare(b.data.title);
});
---

<Layout title="Projects">
  <Section title="Projects">
    <div class="w-full grid grid-cols-1 md:grid-cols-2 gap-4">
      {projects.map((project) => (
        <ProjectCard
          slug={project.id}
          title={project.data.title}
          description={project.data.description}
          year={project.data.year}
          tags={project.data.tags}
          heroImage={project.data.heroImage}
        />
      ))}
    </div>
  </Section>
</Layout>
