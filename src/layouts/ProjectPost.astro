---
import type { CollectionEntry } from "astro:content";
import Layout from "@/layouts/Layout.astro";

type Props = CollectionEntry<"projects">["data"];

const {
  title,
  description,
  heroImage,
  status,
  year,
  tech,
  liveUrl,
  repoUrl,
} = Astro.props as Props;
---

<Layout>
  <article class="pb-10 grid place-items-center grid-cols-1">
    <div class="w-full grid place-items-center my-10 px-10 overflow-x-hidden">
      {heroImage && (
        <img
            src={heroImage}
            alt={title}
            class="max-h-[60vh] w-auto rounded-2xl object-contain"
        />
        )}
    </div>

    <div
      class="prose !max-w-[90vw] overflow-x-hidden !break-words brightness-110 prose-img:scale-90 prose-img:rounded-2xl prose-invert prose-hr:border-white prose-hr:bg-white px-4 md:px-0 md:max-w-4xl"
    >
      <header>
        <h1>{title}</h1>

        {description && <p class="opacity-80">{description}</p>}

        <div class="not-prose mt-4 flex flex-wrap gap-2 text-sm">
          {status && (
            <span class="rounded-full border border-white/20 px-3 py-1">
              {status}
            </span>
          )}
          {year && (
            <span class="rounded-full border border-white/20 px-3 py-1">
              {year}
            </span>
          )}
          {tech?.length && (
            <span class="rounded-full border border-white/20 px-3 py-1">
              {tech.join(" Â· ")}
            </span>
          )}
        </div>

        <div class="not-prose mt-4 flex gap-4">
          {liveUrl && (
            <a class="underline" href={liveUrl} target="_blank" rel="noreferrer">
              Live
            </a>
          )}
          {repoUrl && (
            <a class="underline" href={repoUrl} target="_blank" rel="noreferrer">
              Code
            </a>
          )}
        </div>

        <hr class="mt-6" />
      </header>

      <slot />
    </div>
  </article>
</Layout>
